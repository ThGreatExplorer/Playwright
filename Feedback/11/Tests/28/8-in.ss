( (module fact (class Factorial (x) (method step () (def curX (this --> x)) (def one 1.0) (def negOne -1.0) (def zero 0.0) (def xMinusOne (curX + negOne)) (def result 0.0) (if0 (this --> x) (result = (one / zero)) (result = (new Factorial (xMinusOne))) ) result ) (method calculate () (def curX (this --> x)) (def one 1.0) (def result 0.5) (if0 curX (result = 1.0) (block (def stepped (this --> step ())) (def temp (one / curX)) (result = (stepped --> calculate ())) (result = (result / temp)) ) ) result ) ) ) (tmodule factfive (timport fact (((x Number)) ((calculate () Number)))) (class FactFive () (method calculate () (def five 5.0) (def fact (new Factorial (five))) (fact --> calculate ()) ) ) (() ((calculate () Number))) ) (import factfive) (def factFive (new FactFive ())) (factFive --> calculate ()) )
